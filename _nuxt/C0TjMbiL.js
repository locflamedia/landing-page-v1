import{r as A,T as p,b as d,f as b,l as O,U as g,c as P,C as S,o as f,h as I,P as v,u as c,x as E}from"./BJpugIag.js";var B=Object.defineProperty,C=Object.defineProperties,j=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&y(e,r,t[r]);if(h)for(var r of h(t))L.call(t,r)&&y(e,r,t[r]);return e},R=(e,t)=>C(e,j(t)),m={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(e,{attrs:t,slots:r,emit:s}){const n=A(null),a=p({observer:null,intersected:!1,loaded:!1}),o=d(()=>a.intersected&&e.src?e.src:e.srcPlaceholder),i=d(()=>a.intersected&&e.srcset?e.srcset:!1),u=()=>{n.value&&n.value.getAttribute("src")!==e.srcPlaceholder&&(a.loaded=!0,s("load",n.value))},w=()=>s("error",n.value);return b(()=>{"IntersectionObserver"in window&&(a.observer=new IntersectionObserver(l=>{l[0].isIntersecting&&(a.intersected=!0,a.observer.disconnect(),s("intersect"))},e.intersectionOptions),a.observer.observe(n.value))}),O(()=>{"IntersectionObserver"in window&&a.observer&&a.observer.disconnect()}),()=>{const l=g("img",R(N({ref:n,src:o.value,srcset:i.value||null},t),{class:[t.class,"v-lazy-image",{"v-lazy-image-loaded":a.loaded}],onLoad:u,onError:w}));return e.usePicture?g("picture",{ref:n,onLoad:u},a.intersected?[r.default,l]:[l]):l}}};const x={__name:"ImageLoadLazy",props:{src:{type:String,default:"/placeholder.jpg"},alt:{type:String,default:"image"},loading:{type:String,default:"lazy"},imageClass:{type:String,default:""},width:[String,Number],height:[String,Number],fit:{type:String,default:"cover",validator:e=>["cover","contain","fill","none"].includes(e)},placeholder:{type:String,default:"/placeholder.jpg"},wrapperClass:{type:String,default:""},decoding:{type:String,default:"async",validator:e=>["async","sync","auto"].includes(e)},priority:{type:Boolean,default:!1}},setup(e){const t=e,r=A(!1),s=d(()=>r.value?"":{"picture-cover":t.fit==="cover","picture-contain":t.fit==="contain","picture-fill":t.fit==="fill","picture-none":t.fit==="none"}),n=()=>{r.value=!0},a={root:null,rootMargin:"0px",threshold:0};return b(()=>{"IntersectionObserver"in window&&document.querySelectorAll(".v-lazy-image").forEach(i=>{i._observer&&(i._observer.disconnect(),i._observer.observe(i))})}),(o,i)=>e.wrapperClass.length>0?(f(),P("div",{key:0,class:E(e.wrapperClass)},[I(c(m),v({src:encodeURI(e.src)||e.placeholder,alt:e.alt,decoding:e.decoding,class:[e.imageClass,c(s)],loading:e.priority?"eager":e.loading,width:e.width,height:e.height,format:"webp",onError:n,"intersection-options":a},o.$attrs),null,16,["src","alt","decoding","class","loading","width","height"])],2)):(f(),S(c(m),v({key:1,src:encodeURI(e.src)||e.placeholder,alt:e.alt,decoding:e.decoding,class:[e.imageClass,c(s)],loading:e.priority?"eager":e.loading,width:e.width,height:e.height,format:"webp",onError:n,"intersection-options":a},o.$attrs),null,16,["src","alt","decoding","class","loading","width","height"]))}};export{x as _};
